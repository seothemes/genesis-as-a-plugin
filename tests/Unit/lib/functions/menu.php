<?php
/**
 * Genesis Framework.
 *
 * WARNING: This file is part of the core Genesis Framework. DO NOT edit this file under any circumstances.
 * Please do all modifications in the form of a child theme.
 *
 * @package StudioPress\Genesis
 * @author  StudioPress
 * @license GPL-2.0-or-later
 * @link    https://my.studiopress.com/themes/genesis/
 */

namespace StudioPress\Genesis\Tests\Unit;

use Brain\Monkey\Functions;
use stdClass;

/**
 * Test option/settings functions.
 *
 * @group settings
 */
class Menu extends TestCase {

	/**
	 * Test `genesis_unique_menu_name` provides unique menu names.
	 *
	 * @dataProvider data_genesis_unique_menu_name
	 *
	 * @param string $name                The new name to test for uniqueness.
	 * @param string $existing_menu_names Menu names to spoof as existing already.
	 * @param mixed  $expected            The expected unique name.
	 */
	public function test_genesis_unique_menu_name( $name, $existing_menu_names, $expected ) {
		Functions\when( 'get_terms' )->justReturn( $existing_menu_names );

		$actual = genesis_unique_menu_name( $name );
		self::assertEquals( $expected, $actual );
	}

	/**
	 * Data provider for `test_genesis_unique_menu_name()`.
	 *
	 * @return array
	 */
	public function data_genesis_unique_menu_name() {
		return [
			'name is unique'                             => [
				'Header Menu',
				[ 'Footer Menu', 'Header Menu Right', 'Header Menu Left' ],
				'Header Menu',
			],
			'name has one duplicate'                     => [
				'Header Menu',
				[ 'Header Menu', 'Header Menu Right', 'Header Menu Left' ],
				'Header Menu 2',
			],
			'name has numbered variations'               => [
				'Header Menu',
				[ 'Header Menu', 'Header Menu 2', 'Header Menu 3', 'Header Menu 4' ],
				'Header Menu 5',
			],
			'name has numbered variations but is unique' => [
				'Header Menu',
				[ 'Header Menu 2', 'Header Menu 3', 'Header Menu 4' ],
				'Header Menu',
			],
			'get_terms does not provide an array'        => [
				'Header Menu',
				new stdClass(),
				'Header Menu',
			],
		];
	}

}
